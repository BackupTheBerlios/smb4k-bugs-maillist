<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Smb4K-bugs] [Bug #10126] A share appears to mount and then	immediately disappears
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/smb4k-bugs/2007-January/index.html" >
   <LINK REL="made" HREF="mailto:smb4k-bugs%40lists.berlios.de?Subject=Re%3A%20%5BSmb4K-bugs%5D%20%5BBug%20%2310126%5D%20A%20share%20appears%20to%20mount%20and%20then%0A%09immediately%20disappears&In-Reply-To=%3C200701261453.l0QErC6n008625%40unicorn.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000030.html">
   <LINK REL="Next"  HREF="000032.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Smb4K-bugs] [Bug #10126] A share appears to mount and then	immediately disappears</H1>
    <B>admin at berlios.de</B> 
    <A HREF="mailto:smb4k-bugs%40lists.berlios.de?Subject=Re%3A%20%5BSmb4K-bugs%5D%20%5BBug%20%2310126%5D%20A%20share%20appears%20to%20mount%20and%20then%0A%09immediately%20disappears&In-Reply-To=%3C200701261453.l0QErC6n008625%40unicorn.berlios.de%3E"
       TITLE="[Smb4K-bugs] [Bug #10126] A share appears to mount and then	immediately disappears">admin at berlios.de
       </A><BR>
    <I>Fri Jan 26 15:53:12 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000030.html">[Smb4K-bugs] [Bug #10126] A share appears to mount and then	immediately disappears
</A></li>
        <LI>Next message: <A HREF="000032.html">[Smb4K-bugs] [Bug #10126] A share appears to mount and then	immediately disappears
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31">[ date ]</a>
              <a href="thread.html#31">[ thread ]</a>
              <a href="subject.html#31">[ subject ]</a>
              <a href="author.html#31">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Bug #10126, was updated on 2007-Jan-25 21:34
Here is a current snapshot of the bug.

Project: Smb4K
Category: None
Status: Open
Resolution: None
Bug Group: normal
Priority: 5
Submitted by: marsolin
Assigned to : none
Summary: A share appears to mount and then immediately disappears

Details: I'm running Kubuntu Edgy. When I use Smb4K I can browser the network and preview shares correctly, but noe of the mounting methods work.

It looks like the share is starting and then disconnects on its own. It even appears for a moment in the right side of the window. The directory for the share gets created, but it is empty.

I also tried CIFS, but with no luck.

Follow-Ups:

Date: 2007-Jan-26 05:53
By: marsolin

Comment:
I ran the following command.

$ smbmount //chad-placer-x/Backup /home/chad/Shares/Backup

It asked for my password, I entered it, and these errors were returned.

smbmnt must be installed suid root for direct user mounts (1000,1000)
smbmnt failed: 1

Next I tried the chmod commands that were suggested and this error occurred.

libsmb based programs must *NOT* be setuid root.
8109: Connection to chad-placer-x failed
SMB connection failed

Adding sudo to the mount command worked.  I was able to unmount successfully from the commandline as well. Unfortunately my problem in Smb4K still exists.

$ sudo smbmount //chad-placer-x/Backup /home/chad/Shares/Backup

sudo is selected in Smb4K's configuration. It's almost as if the drive is being mounted, and then immediately being unmounted.  Can you think of a reason for that?
-------------------------------------------------------

Date: 2007-Jan-26 00:15
By: dustpuppy

Comment:
IMPORTANT: Please do the mounting/unmounting tests *before* you set the SUID root bit. Else the mounting/unmounting will succeed and you won't get the error messages.
-------------------------------------------------------

Date: 2007-Jan-26 00:12
By: dustpuppy

Comment:
To fix this problem, you need to either set the SUID root bit for smbmount/smbumount/mount.cifs/umount.cifs

$ sudo chmod +s /path/to/smbmount
$ sudo chmod +s /path/to/smbumount
$ sudo chmod +s /path/to/mount.cifs
$ sudo chmod +s /path/to/umount.cifs

or enable the super/sudo support in the configuration dialog (Super User -&gt; Actions -&gt; Use super user privileges to mount and unmount shares).

Normally, Smb4K should automatically inform you about this. That it didn't seems to indicate that the error message that's returned by the mount process is different from the ones Smb4K knows. So, would you please do me a favor and try to mount a share from the shell using the following commands:

$ smbmount //HOST/SHARE /mount/point
$ mount.cifs //HOST/SHARE /mount/point

Please replace HOST and SHARE with the appropriate values and choose an existing mount point. Both commands should fail and return an error message. Please report both here. Additionally, I want to ask you to also report the error messages that are returned by smbumount and umount.cifs if you try to unmount a share:

$ smbumount /mount/point
$ umount.cifs /mount/point
-------------------------------------------------------

For detailed info, follow this link:
<A HREF="http://developer.berlios.de/bugs/?func=detailbug&amp;bug_id=10126&amp;group_id=769">http://developer.berlios.de/bugs/?func=detailbug&amp;bug_id=10126&amp;group_id=769</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000030.html">[Smb4K-bugs] [Bug #10126] A share appears to mount and then	immediately disappears
</A></li>
	<LI>Next message: <A HREF="000032.html">[Smb4K-bugs] [Bug #10126] A share appears to mount and then	immediately disappears
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31">[ date ]</a>
              <a href="thread.html#31">[ thread ]</a>
              <a href="subject.html#31">[ subject ]</a>
              <a href="author.html#31">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/smb4k-bugs">More information about the Smb4K-bugs
mailing list</a><br>
</body></html>
